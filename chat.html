<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Julie - Serial Chilleuse</title>
  <style>
    :root { --color-primary:#60C0E6;--color-primary-hover:#468FCF;--color-bg:#F2F7FA;--bubble-user:#D0E8FF;--bubble-bot:#FFFFFF;--input-bg:#FFFFFF;--radius:20px;--shadow:rgba(0,0,0,0.1);}    
    * { box-sizing:border-box;margin:0;padding:0; }
    html,body { height:100%;background:var(--color-bg);font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif; }
    body { display:flex;flex-direction:column; }
    .chat-header { display:flex;align-items:center;justify-content:space-between;padding:1rem;background:var(--color-primary);color:#fff;font-size:1.25rem;font-weight:bold;box-shadow:0 2px 4px var(--shadow); }
    .chat-header button { background:none;border:none;color:#fff;font-size:1.5rem;cursor:pointer; }
    .header-title { flex:1;text-align:center; }
    .onboard-step { display:none;position:fixed;inset:0;background:rgba(255,255,255,0.95);z-index:100;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:1rem; }
    .onboard-step.active { display:flex; }
    .onboard-step p, .onboard-step h2 { margin-bottom:1rem; }
    .onboard-step img { width:150px;height:auto;max-height:200px;object-fit:contain;margin-bottom:1rem; }
    .lang-btn, .btn-primary, .cta-options button { background:var(--color-primary);color:#fff;border:none;border-radius:var(--radius);padding:.75rem 1.5rem;cursor:pointer;margin:.5rem 0;width:70%; }
    .lang-btn:hover, .btn-primary:hover, .cta-options button:hover { background:var(--color-primary-hover); }
    .skip-btn { background:none;color:var(--color-primary);margin-top:1rem;cursor:pointer; }
    .chat-container { flex:1;display:flex;flex-direction:column;margin:.5rem;background:#fff;border-radius:var(--radius);overflow:hidden;box-shadow:0 4px 12px var(--shadow); }
    .chat-scroll { flex:1;overflow-y:auto;padding:1rem;display:none;flex-direction:column;gap:1rem;background:var(--color-bg); }
    .chat-scroll.active { display:flex; }
    .message-wrapper { display:flex;width:100%;align-items:flex-end;gap:.75rem; }
    .message-wrapper.bot { justify-content:flex-start; }
    .message-wrapper.user { justify-content:flex-end; }
    .message { max-width:70%;padding:.75rem 1rem;border-radius:var(--radius);box-shadow:0 1px 3px var(--shadow);line-height:1.4; }
    .message.bot { background:var(--bubble-bot);color:#333;border-top-left-radius:4px; }
    .message.user { background:var(--bubble-user);color:#000;border-top-right-radius:4px; }
    form#chat-form { display:none;width:100%; }
    form#chat-form.active { display:flex; }
    .input-area { display:flex;align-items:center;padding:.75rem;background:var(--input-bg);box-shadow:0 -2px 4px var(--shadow); }
    .input-area .emoji-btn { background:none;border:none;font-size:1.5rem;margin-right:.5rem;cursor:pointer; }
    .input-area input { flex:1;padding:.75rem 1rem;border:1px solid #ccc;border-radius:30px;outline:none;margin-right:.5rem; }
    .input-area button.send-btn { background:linear-gradient(135deg,var(--color-primary),var(--color-primary-hover));border:none;width:2.5rem;height:2.5rem;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:1.25rem;cursor:pointer;box-shadow:0 2px 4px var(--shadow);transition:background .2s; }
    .input-area button.send-btn:disabled { opacity:.5;cursor:not-allowed; }
  </style>
</head>
<body>
  <div class="chat-header">
    <button id="header-back-btn" aria-label="Retour">‚Üê</button><div class="header-title">Julie</div><button aria-label="Plus">‚ãØ</button>
  </div>
  <div id="step-language" class="onboard-step active">
    <p id="lang-p">Choisissez votre langue / Choose your language / Elige tu idioma / W√§hle deine Sprache</p>
    <button class="lang-btn" data-lang="fr">Fran√ßais</button>
    <button class="lang-btn" data-lang="en">English</button>
    <button class="lang-btn" data-lang="es">Espa√±ol</button>
    <button class="lang-btn" data-lang="de">Deutsch</button>
  </div>
  <div id="step-intro" class="onboard-step">
    <img src="image2.png" alt="Julie souriante">
    <h2 id="intro-title">Bienvenue‚ÄØ!</h2>
    <p id="intro-text">Je suis <strong>Julie</strong>, votre concierge virtuelle pour votre s√©jour.</p>
    <button class="btn-primary" id="btn-intro-next">Cool‚ÄØ!</button>
  </div>
  <div id="step-cta" class="onboard-step">
    <h2 id="cta-title">Par o√π commencer‚ÄØ?</h2>
    <div class="cta-options">
      <button data-cta="section-services" id="btn-services">Services de l'h√¥tel</button>
      <button data-cta="section-livret" id="btn-livret">Le livret d'accueil</button>
      <button data-cta="chat" id="btn-chat">Chat</button>
    </div>
    <button class="skip-btn" id="btn-cta-skip">Passer</button>
  </div>
  <div class="chat-container">
    <div id="section-services" class="onboard-step section">
      <h2>Services de l'h√¥tel</h2><div class="service-list"><button data-detail="detail-roomservice">Room Service</button><button data-detail="detail-blanchisserie">Blanchisserie</button><button data-detail="detail-reception">R√©ception 24h/24</button></div>
    </div>
    <div id="section-livret" class="onboard-step section">
      <h2>Livret d'accueil</h2><p>Informations et r√®gles de l'h√¥tel.</p><button class="btn-chat-start">Lancer le chat</button>
    </div>
    <div id="chat" class="chat-scroll"></div>
    <form id="chat-form" class="input-area">
      <button type="button" class="emoji-btn">üòä</button><input type="text" id="user-input" placeholder="Message‚Ä¶" autocomplete="off" /><button type="submit" class="send-btn">‚û§</button>
    </form>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const headerBackBtn = document.getElementById('header-back-btn');
      const stepLang = document.getElementById('step-language');
      const stepIntro = document.getElementById('step-intro');
      const stepCta = document.getElementById('step-cta');
      const secServices = document.getElementById('section-services');
      const secLivret = document.getElementById('section-livret');
      const chatScroll = document.getElementById('chat');
      const chatForm = document.getElementById('chat-form');
      const inputEl = document.getElementById('user-input');
      const btnServices = document.getElementById('btn-services');
      const btnLivret = document.getElementById('btn-livret');
      const btnChat = document.getElementById('btn-chat');
      const btnSkip = document.getElementById('btn-cta-skip');
      
      // Localization
      const texts = {
        fr: { introTitle:'Bienvenue‚ÄØ!', introText:"Je suis <strong>Julie</strong>, votre concierge virtuelle pour votre s√©jour.", ctaTitle:'Par o√π commencer‚ÄØ?', services:'Services de l\'h√¥tel', livret:"Le livret d'accueil", chat:'Chat', skip:'Passer', placeholder:'√âcris votre message‚Ä¶' },
        en: { introTitle:'Welcome!', introText:"I'm <strong>Julie</strong>, your virtual concierge for your stay.", ctaTitle:'Where to start?', services:'Hotel services', livret:'Guest booklet', chat:'Chat', skip:'Skip', placeholder:'Type your message‚Ä¶' },
        es: { introTitle:'¬°Bienvenido!', introText:"Soy <strong>Julie</strong>, tu conserje virtual durante tu estancia.", ctaTitle:'¬øPor d√≥nde empezar?', services:'Servicios del hotel', livret:'Folleto de bienvenida', chat:'Chat', skip:'Omitir', placeholder:'Escribe tu mensaje‚Ä¶' },
        de: { introTitle:'Willkommen!', introText:"Ich bin <strong>Julie</strong>, Ihre virtuelle Concierge w√§hrend Ihres Aufenthalts.", ctaTitle:'Wo anfangen?', services:'Hoteldienstleistungen', livret:'G√§stebuch', chat:'Chat', skip:'√úberspringen', placeholder:'Nachricht eingeben‚Ä¶' }
      };
      let lang='fr';

      function hideAll(){ [stepLang,stepIntro,stepCta,secServices,secLivret].forEach(e=>e.classList.remove('active')); chatScroll.classList.remove('active'); chatForm.classList.remove('active'); headerBackBtn.style.display='none'; }
      function show(el){ hideAll(); el.classList.add('active'); }
      function showChat(){ hideAll(); chatScroll.classList.add('active'); chatForm.classList.add('active'); inputEl.placeholder=texts[lang].placeholder; inputEl.focus(); }

      // Onboarding flow
      show(stepLang);
      document.querySelectorAll('.lang-btn').forEach(btn=> btn.addEventListener('click', ()=>{
        lang=btn.dataset.lang;
        document.getElementById('intro-title').innerHTML=texts[lang].introTitle;
        document.getElementById('intro-text').innerHTML=texts[lang].introText;
        document.getElementById('cta-title').textContent=texts[lang].ctaTitle;
        btnServices.textContent=texts[lang].services;
        btnLivret.textContent=texts[lang].livret;
        btnChat.textContent=texts[lang].chat;
        btnSkip.textContent=texts[lang].skip;
        show(stepIntro);
      }));
      document.getElementById('btn-intro-next').addEventListener('click', ()=> show(stepCta) );
      btnSkip.addEventListener('click', () => showChat());
      btnServices.addEventListener('click', ()=> show(secServices));
      btnLivret.addEventListener('click', ()=> show(secLivret));
      btnChat.addEventListener('click', ()=> showChat());

      headerBackBtn.addEventListener('click', ()=>{
        if(secServices.classList.contains('active')||secLivret.classList.contains('active')) show(stepCta);
        else if(stepIntro.classList.contains('active')) show(stepLang);
        else if(stepCta.classList.contains('active')) show(stepIntro);
      });

      // Chat logic
      function addMessage(txt,s){const w=document.createElement('div');w.className='message-wrapper '+s;const m=document.createElement('div');m.className='message '+s;m.innerHTML=txt;w.appendChild(m);chatScroll.appendChild(w);chatScroll.scrollTop=chatScroll.scrollHeight;}
      chatForm.addEventListener('submit',async e=>{e.preventDefault();const t=inputEl.value.trim();if(!t)return;addMessage(t,'user');inputEl.value='';addMessage('Julie r√©fl√©chit‚Ä¶','bot');try{const r=await fetch('https://YOUR_WEBHOOK_URL',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message:t,language:lang})});const d=await r.json();const tip=document.querySelector('.message-wrapper.bot:last-child .message');if(tip)tip.innerHTML=d.response||d.message;}catch{addMessage('Erreur de connexion üòì','bot');}});
    });
  </script>
</body>
</html>
